# Test Design: Story 1.9

Date: 2025-10-28
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 18
- Unit tests: 12 (67%)
- Integration tests: 6 (33%)
- E2E tests: 0 (0%)
- Priority distribution: P0: 8, P1: 7, P2: 3

## Test Scenarios by Acceptance Criteria

### AC1.9.1-1.9.2: FileMetadata Model and Unit Tests

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 1.9-UNIT-001 | Unit        | P0       | FileMetadata constructor  | Core infrastructure model |
| 1.9-UNIT-002 | Unit        | P0       | computeBasename helper    | Path parsing logic       |
| 1.9-UNIT-003 | Unit        | P0       | computeFolder helper      | Directory extraction     |
| 1.9-UNIT-004 | Unit        | P0       | computeMimeType helper    | File type detection      |
| 1.9-UNIT-005 | Unit        | P1       | MIME detection edge cases | Unknown extensions       |
| 1.9-UNIT-006 | Unit        | P2       | Computed field validation | All fields populated     |

### AC1.9.3: TemplatePort Interface

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 1.9-UNIT-007 | Unit        | P0       | TemplatePort contract     | Interface compliance     |

### AC1.9.4-1.9.5: TemplateLoaderAdapter List() Method

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 1.9-UNIT-008 | Unit        | P0       | List() discovers templates| Core discovery logic     |
| 1.9-UNIT-009 | Unit        | P0       | List() builds metadata    | Cache population         |
| 1.9-UNIT-010 | Unit        | P1       | List() sorts templates    | Consistent ordering      |
| 1.9-UNIT-011 | Unit        | P1       | List() filters .md files  | File type filtering      |
| 1.9-UNIT-012 | Unit        | P2       | List() handles empty dir  | Edge case handling       |

### AC1.9.6-1.9.7: TemplateLoaderAdapter Load() Method

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 1.9-UNIT-013 | Unit        | P0       | Load() success case       | Core loading functionality|
| 1.9-UNIT-014 | Unit        | P0       | Load() missing template   | Error handling           |
| 1.9-UNIT-015 | Unit        | P0       | Load() read failure       | Error handling           |
| 1.9-UNIT-016 | Unit        | P0       | Load() invalid UTF-8      | Content validation       |

### AC1.9.8: Unit Tests

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 1.9-UNIT-017 | Unit        | P0       | All unit tests pass       | Quality gate             |

### AC1.9.9: Integration Tests

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 1.9-INT-001  | Integration | P0       | List() finds test templates| Real filesystem discovery|
| 1.9-INT-002  | Integration | P0       | Load() reads test content | Real file reading        |
| 1.9-INT-003  | Integration | P0       | Load() handles missing    | Real error scenarios     |
| 1.9-INT-004  | Integration | P1       | Multiple template loading | Bulk operations          |
| 1.9-INT-005  | Integration | P1       | Template content validation| UTF-8 validation         |
| 1.9-INT-006  | Integration | P2       | Sorted template list      | Ordering verification    |

### AC1.9.10-1.9.11: Quality Gates

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 1.9-UNIT-018 | Unit        | P0       | All tests pass            | Quality gate             |
| 1.9-INT-007  | Integration | P0       | Integration tests pass    | Quality gate             |

## Risk Coverage

### Implementation Risks

- **Template discovery failure**: Covered by List() unit and integration tests
- **File reading errors**: Covered by Load() error handling tests
- **Invalid content**: Covered by UTF-8 validation tests
- **Performance with many templates**: Covered by integration tests with multiple files

## Recommended Execution Order

1. P0 Unit tests (FileMetadata, TemplatePort, core List/Load functionality)
2. P0 Integration tests (real filesystem operations)
3. P1 tests (edge cases, multiple templates)
4. P2 tests (empty directories, sorting verification)
5. Quality gate tests (all tests pass)
