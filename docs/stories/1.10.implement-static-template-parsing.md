# Story 1.10: Implement Static Template Parsing

## Status: Draft

## Story

As a developer,
I want to parse the loaded template content using Go's `text/template` engine,
so that I can process a template without dynamic functions.

## Acceptance Criteria

- 1.10.1: The `new` command uses `text/template` to parse the template string read in the previous story.
- 1.10.2: A template with only static text is parsed and executed successfully.
- 1.10.3: A syntax error in the template results in a descriptive error message, propagated correctly through the command.

## Tasks / Subtasks

- [ ] Task 1: Create template parser service
  - [ ] Create `internal/app/template/parser.go` file
  - [ ] Define `TemplateParser` interface with `Parse(templateContent string) (*template.Template, error)` method
  - [ ] Implement `StaticTemplateParser` struct with `Parse` method using `text/template`
  - [ ] Add proper error handling for syntax errors
- [ ] Task 2: Implement template execution for static content
  - [ ] Add template execution step
  - [ ] Ensure static text templates render correctly
  - [ ] Propagate execution errors properly
- [ ] Task 3: Add unit tests for template parsing
  - [ ] Test successful parsing of static templates
  - [ ] Test error handling for syntax errors
  - [ ] Test error propagation through command

## Dev Notes

### Previous Story Insights

Story 1.9 implemented template reading using FileSystemPort. The template content is now available as a string in the new command.

### Data Models

Template model from `internal/domain/template.go` includes `Content string` field for raw template text.

### API Specifications

FileSystemPort.ReadFile returns `([]byte, error)` - template content needs to be converted to string.

### Component Specifications

TemplateEngine in `docs/architecture/components.md#templateengine` uses Go `text/template` for template rendering. For this story, focus on static parsing without custom functions.

### File Locations

- New command logic: `internal/adapters/api/cli/new.go` (modify existing file from Story 1.9)
- Template parsing service: `internal/app/template/parser.go` (new service following domain service pattern)
- Template parsing interface: `internal/app/template/parser.go` (define interface for testability)
- Tests: `internal/app/template/parser_test.go` (co-located with implementation)

### Testing Requirements

Unit tests for template parsing using table-driven tests. Cover success and error cases. Use `testing` (stdlib) with in-memory template strings.

### Technical Constraints

Use Go 1.23+ `text/template` stdlib. No custom functions in this story. Follow Result pattern for error handling.

### Source References

- Template Engine: `docs/architecture/tech-stack.md#template-engine`
- Components: `docs/architecture/components.md#templateengine`
- Testing: `docs/architecture/testing-strategy.md#unit-tests`

## Testing

List Relevant Testing Standards from Architecture the Developer needs to conform to:

- Test file location: Co-located `*_test.go` files
- Test standards: Table-driven tests, cover happy path, validation failure, context cancellation
- Testing frameworks: Go `testing` (stdlib)
- Specific testing requirements: Unit tests for template parsing, integration tests for command flow

## Change Log

| Date       | Version | Description          | Author      |
| ---------- | ------- | -------------------- | ----------- |
| 2025-10-19 | 1.0     | Initial story draft  | Scrum Master |

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results